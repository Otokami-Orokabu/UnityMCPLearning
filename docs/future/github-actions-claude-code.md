# GitHub Actions ã§ã® Claude Code è¨­å®šã‚¬ã‚¤ãƒ‰

## ğŸ“Š æ¦‚è¦

GitHub Actions ã« Claude Code ã‚’çµ±åˆã™ã‚‹ã“ã¨ã§ã€CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å†…ã§AIã‚’æ´»ç”¨ã—ãŸè‡ªå‹•åŒ–ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚Unity MCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ã€ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆãªã©ã«æ´»ç”¨ã§ãã¾ã™ã€‚

## ğŸ¯ Claude Code Ã— GitHub Actions ã®å¯èƒ½æ€§

### **ç¾åœ¨è€ƒãˆã‚‰ã‚Œã‚‹çµ±åˆæ–¹æ³•**

#### **1. API ã‚­ãƒ¼ãƒ™ãƒ¼ã‚¹ã®çµ±åˆ**
```yaml
name: Claude Code Integration
on: [push, pull_request]

jobs:
  claude-analysis:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Claude Code
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
        run: |
          # Claude Code CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
          npm install -g @anthropic-ai/claude-code
          # ã¾ãŸã¯ pip install claude-code
          
      - name: Analyze Code Quality
        run: |
          claude-code analyze --project ./unity-mcp-node
          claude-code test --generate-missing
```

#### **2. MCP ã‚µãƒ¼ãƒãƒ¼çµ±åˆ**
```yaml
name: Unity MCP Validation
on: [push, pull_request]

jobs:
  unity-validation:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Unity MCP
        run: |
          cd unity-mcp-node
          npm install
          npm run build
          
      - name: Start MCP Server
        run: |
          npm start &
          sleep 5  # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾…æ©Ÿ
          
      - name: Claude Code MCP Test
        env:
          CLAUDE_MCP_SERVER: "localhost:3000"
        run: |
          claude-code mcp connect unity-mcp-server
          claude-code mcp test "create 10 test cubes"
          claude-code mcp test "validate scene structure"
```

## ğŸ› ï¸ Unity MCP å°‚ç”¨ã®æ´»ç”¨ä¾‹

### **1. è‡ªå‹•ãƒ†ã‚¹ãƒˆç”Ÿæˆ**

#### **TypeScript ãƒ†ã‚¹ãƒˆè‡ªå‹•ç”Ÿæˆ**
```yaml
name: Auto Generate Tests
on:
  push:
    paths:
      - 'unity-mcp-node/src/**'

jobs:
  generate-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Generate Missing Tests
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
        run: |
          claude-code analyze src/index.ts \
            --prompt "Generate Jest unit tests for all functions that don't have tests" \
            --output tests/generated/
          
      - name: Run Generated Tests
        run: |
          npm test tests/generated/
          
      - name: Create PR for Tests
        if: success()
        uses: peter-evans/create-pull-request@v5
        with:
          title: "Auto-generated tests for MCP server"
          body: "Generated by Claude Code in GitHub Actions"
          branch: auto-tests-${{ github.sha }}
```

### **2. Unity ã‚·ãƒ¼ãƒ³æ¤œè¨¼**

#### **ã‚·ãƒ¼ãƒ³æ§‹é€ è‡ªå‹•ãƒã‚§ãƒƒã‚¯**
```yaml
name: Unity Scene Validation
on:
  push:
    paths:
      - 'MCPLearning/Assets/Scenes/**'

jobs:
  validate-scenes:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Unity & Claude Code
        run: |
          # Unity Editor ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
          wget -qO- https://get.unity3d.com/linux.sh | bash
          
          # Claude Code ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
          npm install -g @anthropic-ai/claude-code
          
      - name: Start Unity & MCP
        run: |
          # Unity ã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•
          unity-editor -batchmode -projectPath ./MCPLearning &
          
          # MCP ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
          cd unity-mcp-node && npm start &
          
      - name: Validate Scene Structure
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
        run: |
          claude-code mcp unity << 'EOF'
          # ã‚·ãƒ¼ãƒ³æ§‹é€ ã®æ¤œè¨¼
          scene_info = get_scene_info()
          
          # å¿…é ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å­˜åœ¨ç¢ºèª
          required_objects = ["Main Camera", "Directional Light"]
          for obj in required_objects:
              if obj not in scene_info.objects:
                  raise Exception(f"Required object {obj} not found")
          
          # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯
          if scene_info.polygon_count > 100000:
              print("WARNING: High polygon count detected")
          
          # ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°è¨­å®šç¢ºèª
          lighting_info = get_lighting_info()
          if not lighting_info.baked_lighting:
              print("INFO: Consider baking lighting for better performance")
          EOF
```

### **3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•æ›´æ–°**

#### **API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ**
```yaml
name: Auto Update Documentation
on:
  push:
    branches: [main]

jobs:
  update-docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Generate API Documentation
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
        run: |
          # TypeScript ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
          claude-code document \
            --input "unity-mcp-node/src/**/*.ts" \
            --output "docs/api/" \
            --format markdown \
            --include-examples
          
          # Unity C# ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
          claude-code document \
            --input "MCPLearning/Assets/UnityMCP/**/*.cs" \
            --output "docs/unity-api/" \
            --format markdown \
            --include-examples
      
      - name: Update README
        run: |
          claude-code update-readme \
            --project-status ./PROJECT_STATUS.md \
            --api-docs ./docs/api/ \
            --output ./README.md
      
      - name: Commit Documentation
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add docs/ README.md
          git commit -m "Auto-update documentation via Claude Code" || exit 0
          git push
```

## ğŸ”§ è©³ç´°è¨­å®šä¾‹

### **Claude Code è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**

#### **.claude-code.yml**
```yaml
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
project:
  name: "Unity MCP Learning"
  type: "unity-mcp"
  
# ã‚³ãƒ¼ãƒ‰åˆ†æè¨­å®š
analysis:
  languages: ["typescript", "csharp"]
  frameworks: ["node.js", "unity"]
  
  rules:
    - check_test_coverage: true
    - min_coverage: 80
    - check_documentation: true
    - unity_best_practices: true

# ãƒ†ã‚¹ãƒˆç”Ÿæˆè¨­å®š
testing:
  jest:
    config_path: "unity-mcp-node/jest.config.js"
    test_pattern: "**/*.test.ts"
  
  unity:
    test_assembly: "UnityMCP.Editor.Tests"
    test_pattern: "**/*Tests.cs"

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆè¨­å®š
documentation:
  api_output: "docs/api/"
  format: "markdown"
  include_examples: true
  auto_update_readme: true

# MCP çµ±åˆè¨­å®š
mcp:
  server_path: "unity-mcp-node/dist/index.js"
  unity_project: "MCPLearning"
  test_commands:
    - "ping"
    - "create_cube"
    - "unity_info_realtime"
```

### **Secrets è¨­å®š**

#### **å¿…è¦ãªç’°å¢ƒå¤‰æ•°**
```bash
# GitHub ãƒªãƒã‚¸ãƒˆãƒªã® Settings > Secrets ã§è¨­å®š
CLAUDE_API_KEY=sk-ant-api03-...
UNITY_LICENSE=<Unity Pro License>
UNITY_EMAIL=<Unity ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ>
UNITY_PASSWORD=<Unity ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰>
```

### **é«˜åº¦ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹**

#### **å®Œå…¨ãª CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**
```yaml
name: Complete Unity MCP Pipeline
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  # Step 1: ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
  code-quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Claude Code Quality Analysis
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
        run: |
          claude-code analyze --all
          claude-code security-scan
          claude-code performance-check
  
  # Step 2: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
  testing:
    needs: code-quality
    runs-on: ubuntu-latest
    strategy:
      matrix:
        unity-version: [2022.3.21f1, 6000.1.5f1]
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Unity
        uses: unity-ci/setup-unity@v1
        with:
          unity-version: ${{ matrix.unity-version }}
          unity-license: ${{ secrets.UNITY_LICENSE }}
      
      - name: Run Tests with Claude Code
        run: |
          # TypeScript ãƒ†ã‚¹ãƒˆ
          cd unity-mcp-node
          npm test
          
          # Unity ãƒ†ã‚¹ãƒˆ
          claude-code mcp unity test-all
          
          # çµ±åˆãƒ†ã‚¹ãƒˆ
          claude-code integration-test \
            --unity-version ${{ matrix.unity-version }}
  
  # Step 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
  documentation:
    needs: testing
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Update Documentation
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
        run: |
          claude-code generate-docs --auto-commit
  
  # Step 4: ãƒªãƒªãƒ¼ã‚¹ä½œæˆ
  release:
    needs: [testing, documentation]
    if: startsWith(github.ref, 'refs/tags/v')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Create Release with Claude Code
        env:
          CLAUDE_API_KEY: ${{ secrets.CLAUDE_API_KEY }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          # ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
          claude-code generate-release-notes \
            --from-tag ${{ github.event.before }} \
            --to-tag ${{ github.sha }}
          
          # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
          claude-code build-packages --all-platforms
          
          # GitHub Release ä½œæˆ
          gh release create ${{ github.ref_name }} \
            --notes-file release-notes.md \
            --title "Unity MCP ${{ github.ref_name }}"
```

## ğŸš€ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### **é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š**
- **è‡ªå‹•ãƒ†ã‚¹ãƒˆç”Ÿæˆ**: æ‰‹å‹•ãƒ†ã‚¹ãƒˆä½œæˆæ™‚é–“ã‚’80%å‰Šæ¸›
- **ã‚³ãƒ¼ãƒ‰å“è³ªç¶­æŒ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®å“è³ªãƒã‚§ãƒƒã‚¯
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸ**: ã‚³ãƒ¼ãƒ‰ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•åŒæœŸ

### **å“è³ªå‘ä¸Š**
- **ä¸€è²«æ€§ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰**: AI ã«ã‚ˆã‚‹çµ±ä¸€ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–**: è‡ªå‹•çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§æ¤œå‡º
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: AI ã«ã‚ˆã‚‹æœ€é©åŒ–ææ¡ˆ

### **ãƒãƒ¼ãƒ åŠ¹ç‡åŒ–**
- **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ”¯æ´**: è‡ªå‹•çš„ãªæ”¹å–„ææ¡ˆ
- **æ–°äººæ•™è‚²**: AI ã«ã‚ˆã‚‹å­¦ç¿’æ”¯æ´
- **çŸ¥è­˜å…±æœ‰**: è‡ªå‹•çš„ãªãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é©ç”¨

## âš ï¸ æ³¨æ„äº‹é …ãƒ»åˆ¶é™äº‹é …

### **æŠ€è¡“çš„åˆ¶é™**
- **API ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: Claude API ã®ä½¿ç”¨é‡åˆ¶é™
- **Unity ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: CI/CDã§ã®Unity Pro ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å¿…è¦
- **å®Ÿè¡Œæ™‚é–“åˆ¶é™**: GitHub Actions ã®å®Ÿè¡Œæ™‚é–“åˆ¶é™

### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …**
```yaml
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šä¾‹
security:
  api_keys:
    - store_in_secrets: true
    - rotation_schedule: "monthly"
  
  code_access:
    - limit_to_public_repos: false
    - review_ai_suggestions: true
  
  data_handling:
    - no_sensitive_data: true
    - audit_logging: true
```

### **ã‚³ã‚¹ãƒˆç®¡ç†**
```yaml
# ã‚³ã‚¹ãƒˆæœ€é©åŒ–è¨­å®š
cost_management:
  usage_limits:
    daily_api_calls: 1000
    monthly_budget: 100  # USD
  
  optimization:
    cache_results: true
    batch_requests: true
    smart_triggering: true  # å¿…è¦ãªæ™‚ã®ã¿å®Ÿè¡Œ
```

## ğŸ”— å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Unity CI/CD](https://unity.com/solutions/ci-cd)

### **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒªã‚½ãƒ¼ã‚¹**
- [Unity Actions Marketplace](https://github.com/marketplace?type=actions&query=unity)
- [Claude Code Examples](https://github.com/anthropics/claude-code-examples)

---

**æ³¨æ„**: ã“ã®æ–‡æ›¸ã¯ç¾åœ¨ã®æ¨å®šã«åŸºã¥ã„ã¦ãŠã‚Šã€Claude Code ã® GitHub Actions çµ±åˆã®æ­£å¼ãªä»•æ§˜ãŒå…¬é–‹ã•ã‚Œæ¬¡ç¬¬ã€å†…å®¹ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚